# This file is for Jenkins cloud agent configurations.
# For Phase 1 (local dev), EC2 configurations will be placeholders.
# Actual values for AMI IDs, credentials, subnets, etc.,
# will be needed for staging and production environments.

jenkins:
  clouds:
    # This section defines a connection to an AWS EC2 cloud.
    # - cloudName: A unique name for this cloud configuration in Jenkins.
    # - region: The AWS region where EC2 instances will be launched.
    # - credentialsId: The ID of a Jenkins credential (e.g., AWS Credentials
    #   type) that provides access to your AWS account. This credential would
    #   typically be defined in 06-credentials.yaml or via another
    #   secure mechanism.
    # - privateKey: (Optional/Alternative to credentialsId for some auth
    #   methods) Raw private key material. Using credentialsId with an IAM role
    #   is often preferred.
    # - instanceCapStr: A string representing the maximum number of instances
    #   this cloud configuration can launch.
    # - sshPort: Port used for SSH connections to agents.
    - ec2:
        cloudName: "aws-ec2-dev-placeholder"
        region: "us-east-1"
        credentialsId: "aws-ec2-credentials-placeholder"
        privateKey: ""
        instanceCapStr: "2"
        sshPort: "22"

        # Templates define the types of EC2 instances Jenkins can launch.
        # Each template typically corresponds to a specific Packer-built AMI
        # and instance configuration.
        # - ami: The ID of the Amazon Machine Image (AMI). This will be your
        #   Packer-built image.
        # - description: A human-readable description for this agent template.
        # - instanceType: The EC2 instance type (e.g., t3.medium, m5.large).
        # - labels: Jenkins labels assigned to agents from this template,
        #   used by jobs to select agents.
        # - remoteFS: The remote file system root on the agent
        #   (e.g., /home/ec2-user or /home/jenkins).
        # - subnetId: The VPC subnet ID where instances should be launched.
        #   Crucial for network placement.
        # - securityGroups: Comma-separated list of security group names or IDs.
        # - iamInstanceProfile: (Recommended for secure AWS access without
        #   embedding credentials) The ARN or name of the IAM instance profile.
        # - keyPairName: (Optional) Name of an EC2 key pair for direct SSH
        #   access if needed.
        # - tags: (Optional) AWS tags to apply to launched instances for
        #   organization and cost tracking.
        # Additional template options like 'initScript', 'userData',
        # 'connectBySSHProcess', 'instanceCapStr' (per-template) can be added.
        templates:
          - ami: "ami-packer-placeholder-id"
            description: "Placeholder Packer-based EC2 Linux Agent"
            instanceType: "t3.medium"
            labels: "ec2 linux general-purpose packer-agent"
            remoteFS: "/home/ec2-user"
            subnetId: "subnet-placeholderid_for_dev_or_testing"
            securityGroups: "sg-placeholder_jenkins_agent_access"
            iamInstanceProfile: "jenkins-agent-ec2-profile-placeholder"
            keyPairName: ""
            tags:
              - name: "Name"
                value: "jenkins-agent-ec2-dev-placeholder"
              - name: "Service"
                value: "JenkinsAgent"
              - name: "Environment"
                value: "DevelopmentPlaceholder"
